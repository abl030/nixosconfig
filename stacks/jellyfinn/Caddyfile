# Global Options Block
{
    # ACME via Cloudflare DNS (your token already set in env)
    acme_dns cloudflare {env.CLOUDFLARE_API_TOKEN}
}

jellyfinn.ablz.au {
    encode zstd gzip
    log

    # Reverse proxy to Jellyfin on the same host
    reverse_proxy 127.0.0.1:8096 {
        # Pass the REAL client IP & scheme/host so Jellyfin can classify clients correctly
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
    }
}

